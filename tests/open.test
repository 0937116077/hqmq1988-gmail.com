#!/bin/sh

# Check open syscall decoding.

. "${srcdir=.}/init.sh"

# strace -P is implemented using /proc/self/fd
[ -d /proc/self/fd/ ] ||
	framework_skip_ '/proc/self/fd/ is not available'

run_prog > /dev/null
OUT="$LOG.out"
syscall=${ME_%.test}
sample=$syscall.sample
run_strace -a30 -e$syscall -P$sample $args > "$OUT"
match_diff "$LOG" "$OUT"
rm -f "$OUT"
